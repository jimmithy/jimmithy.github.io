<html lang="en">

<head>
    <title>Identifying Android Build Types - James O'Brien</title>
    <link rel="canonical" href="https://medium.com/@jimmithy/identifying-android-build-types-95095ff390b6" />
    <meta name="description" content="Customizing your app launcher name and icon to differentiate between build variants." />
    <link rel="icon" type="image/png" sizes="32x32" href="../fav/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../fav/favicon-16x16.png" />
    <link rel="manifest" href="../fav/site.webmanifest">
    <link rel="stylesheet" type="text/css" href="../style.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <meta name="viewport" content="width=460" />
    <meta charset="utf-8" />
    <meta name="theme-color" content="#222222" />
    <script>
    (function(i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r;
        i[r] = i[r] || function() {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date();
        a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-70691048-2', 'auto');
    ga('send', 'pageview');
    </script>
    <style>
        .article {
            max-width: 680px;
            margin: 0 auto;
            padding: 20px;
        }
        .article h1 {
            font-size: 36px;
            margin-bottom: 10px;
            text-transform: none;
            letter-spacing: 0;
        }
        .article-meta {
            color: #888;
            font-size: 14px;
            margin-bottom: 30px;
        }
        .article p {
            font-size: 18px;
            line-height: 1.7;
            margin-bottom: 24px;
            color: #333;
        }
        .article h2 {
            font-size: 28px;
            margin: 36px 0 16px;
            text-transform: none;
            letter-spacing: 0;
        }
        .article h3 {
            font-size: 22px;
            margin: 30px 0 12px;
            text-transform: none;
            letter-spacing: 0;
        }
        .article h4 {
            font-size: 18px;
            margin: 28px 0 10px;
            text-transform: none;
            letter-spacing: 0;
        }
        .article ul, .article ol {
            font-size: 18px;
            line-height: 1.7;
            margin-bottom: 24px;
            padding-left: 28px;
            color: #333;
        }
        .article li {
            margin-bottom: 8px;
        }
        .article pre {
            background: #f4f4f4;
            border-left: 3px solid #444444;
            padding: 16px;
            overflow-x: auto;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 24px;
            white-space: pre-wrap;
            word-break: break-word;
        }
        .article code {
            background: #f4f4f4;
            padding: 2px 5px;
            font-size: 15px;
            border-radius: 3px;
            font-family: monospace;
        }
        .article pre code {
            background: none;
            padding: 0;
            font-size: 14px;
        }
        .article figure {
            margin: 0 0 24px;
        }
        .article figure img {
            max-width: 100%;
            height: auto;
            display: block;
            border: 1px solid rgba(0,0,0,.1);
        }
        .article figcaption {
            font-size: 14px;
            color: #888;
            margin-top: 8px;
            text-align: center;
        }
        .article .further-reading {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dddddd;
        }
        .article .further-reading h4 {
            margin-bottom: 12px;
        }
        .article .further-reading ul {
            font-size: 16px;
        }
        .article-source {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #dddddd;
            font-size: 14px;
            color: #888;
        }
        .article a, .article code {
            overflow-wrap: break-word;
        }
        @media (prefers-color-scheme: dark) {
            .article p,
            .article ul,
            .article ol {
                color: #d0d0d0;
            }
            .article pre {
                background: #2a2a2a;
                border-left-color: #666666;
            }
            .article code {
                background: #2a2a2a;
                color: #d0d0d0;
            }
            .article figure img {
                border-color: rgba(255, 255, 255, 0.1);
            }
            .article figcaption,
            .article-meta {
                color: #aaaaaa;
            }
            .article .further-reading,
            .article-source {
                border-top-color: #333333;
                color: #aaaaaa;
            }
        }
    </style>
</head>

<body>
    <section id="header">
        <div id="headerCenter">
            <a href="../index.html"><img id="avatar" src="../img/avatar.png"/></a>
            <a href="../index.html" id="title">James O'Brien</a>
            <ul class="navigation">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../apps">Applications</a></li>
                <li><a href="../writings.html">Writings</a></li>
            </ul>
            <div class="social">
                <a href="https://www.linkedin.com/in/jimmithy/" target="_blank" title="linkedin">
                    <svg class="icons" width="20" height="20" viewBox="0 0 1000 1000">
                        <path d="M892,10H108c-53.9,0-98,44.1-98,98v784c0,53.9,44.1,98,98,98h784c53.9,0,98-44.1,98-98V108C990,54.1,945.9,10,892,10z M304,843H157V402h147V843z M230.5,318.7c-49,0-88.2-39.2-88.2-88.2c0-49,39.2-88.2,88.2-88.2c49,0,88.2,39.2,88.2,88.2C318.7,279.5,279.5,318.7,230.5,318.7z M843,843H696V583.3c0-39.2-34.3-73.5-73.5-73.5c-39.2,0-73.5,34.3-73.5,73.5V843H402V402h147v58.8c24.5-39.2,78.4-68.6,122.5-68.6c93.1,0,171.5,78.4,171.5,171.5V843z"></path>
                    </svg>
                </a>
            </div>
        </div>
    </section>
    <section id="content">
        <article class="article">
            <h1>Identifying Android Build Types</h1>
            <p class="article-meta">March 4, 2020</p>

            <figure>
                <img src="img/1_dO9tl6PtMktBuHrYqBcOQg.png" alt="Android build type icons" />
            </figure>

            <p>During development it's common to add different <a href="https://developer.android.com/studio/build/build-variants" target="_blank">build variants</a>. Build variants are used to create different versions of your application within a single project. This can be used to differentiate between a paid version and a free version of an applications, or white-label a solution for multiple identities.</p>
            <p>In this post, I'm going to briefly show how to add your own build types and provide two methods for differentiating for quick development and testing.</p>

            <h3>Adding Build Types</h3>
            <p>Adding build types is relatively simple. Opening your application's <em>build.gradle</em> file, you should see that Android Studio has already created a buildType for a release. We can add our own buildTypes here for debug and enable debugging.</p>
            <figure>
                <img src="img/1_1o0f2WmC7Rn-w6ORIF2tvA.png" alt="build.gradle buildTypes configuration" />
            </figure>

            <h3>Overriding Resources</h3>
            <p>At run time, Android figures out the best resources to use based on your configuration. You have the ability to define items for different orientations, OS version number, and even things like screen size by creating items with the same name but a different qualifier.</p>
            <p><a href="https://developer.android.com/guide/topics/resources/providing-resources#AlternativeResources" target="_blank">https://developer.android.com/guide/topics/resources/providing-resources</a></p>

            <h3>Overriding the Label</h3>
            <p>To override the application name for debug versions we need to create a new strings file in the debug source set.</p>
            <figure>
                <img src="img/1_Utt2GoGG8SsB8egCOQB1sw.png" alt="New Resource File dialog" />
            </figure>
            <p>In the 'New Resource File' screen, we can create a new version of the strings.xml file and select the debug source set. We then add a new string for app_name with our custom label.</p>
            <p>Below is how the file would look. There is a single string definition, with the same name as the one in the main strings file, however it has a name specific to the build type.</p>
            <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;resources&gt;
    &lt;string name="app_name"&gt;Icon Debug&lt;/string&gt;
&lt;/resources&gt;</code></pre>

            <h3>Using Custom Launcher Icons</h3>
            <p>The adaptive icon builder creates a layout with two layers: a background and a foreground. Here's an example of what your adaptive launcher icon may look like:</p>
            <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;background android:drawable="@drawable/ic_launcher_bg" /&gt;
    &lt;foreground android:drawable="@drawable/ic_launcher_fg" /&gt;
&lt;/adaptive-icon&gt;</code></pre>
            <p>Using the method in the previous section for overriding resources, we can create a new foreground drawable in the debug specific values folder. This way we can add overlays to our launcher to differentiate the build variant.</p>
            <p>We can then change the foreground icon to have extra layers using a <em>LayerListDrawable</em>. We want to add it as the first item so it appears behind all other items.</p>
            <figure>
                <img src="img/1_48X5Vz_1VwR2eXylZlHQlA.png" alt="Icon Banner with Paw Print" />
                <figcaption>Icon Banner with Paw Print (Dog Fooding)</figcaption>
            </figure>
            <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;layer-list xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;item&gt;
        &lt;!--- Place your original vector icon here --&gt;
    &lt;/item&gt;
    &lt;item
        android:height="16dp"
        android:bottom="16dp"
        android:gravity="bottom"&gt;
        &lt;shape android:shape="rectangle"&gt;
            &lt;corners android:radius="2dp" /&gt;
            &lt;size
                android:width="10dp"
                android:height="10dp" /&gt;
            &lt;solid android:color="#80FFFFFF" /&gt;
        &lt;/shape&gt;
    &lt;/item&gt;
    &lt;item
        android:bottom="16dp"
        android:gravity="center_horizontal|bottom"&gt;
        &lt;!--- Debug Indicator Vector Drawable ---&gt;
        &lt;vector
            android:width="16dp"
            android:height="16dp"
            android:viewportWidth="24"
            android:viewportHeight="24"&gt;
            &lt;path
                android:fillColor="#B3000000"
                android:pathData="M8.35,3C9.53,2.83 10.78,4.12 11.14,5.9..." /&gt;
        &lt;/vector&gt;
    &lt;/item&gt;
&lt;/layer-list&gt;</code></pre>

            <div class="further-reading">
                <h4>Further Reading</h4>
                <ul>
                    <li><a href="https://developer.android.com/studio/build/build-variants" target="_blank">Configure build variants | Android Developers</a></li>
                    <li><a href="https://developer.android.com/guide/topics/resources/providing-resources#AlternativeResources" target="_blank">App resources overview | Android Developers</a></li>
                </ul>
            </div>

            <div class="article-source">
                Originally published on <a href="https://medium.com/@jimmithy/identifying-android-build-types-95095ff390b6" target="_blank">Medium</a> on March 4, 2020.
            </div>
        </article>
    </section>
</body>

</html>
